# å‘˜å·¥æ¨¡å—å‰åç«¯é›†æˆè¯´æ˜

## ğŸ“‹ é›†æˆæ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å‘˜å·¥ç®¡ç†æ¨¡å—çš„å‰åç«¯é›†æˆæƒ…å†µã€‚

**å‰ç«¯**: `oa-system-frontend/src/modules/employee`
**åç«¯**: `oa-system-backend/src/main/java/com/example/oa_system_backend/module/employee`
**é›†æˆæ—¥æœŸ**: 2025-01-13

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. åç«¯ä»£ç ç”Ÿæˆ

å·²å®Œæˆå®Œæ•´çš„å‘˜å·¥æ¨¡å—åç«¯ä»£ç ï¼ŒåŒ…æ‹¬ï¼š

#### 1.1 å®ä½“ç±»ï¼ˆEntityï¼‰
- âœ… `Employee.java` - å‘˜å·¥å®ä½“ï¼ˆåŒ…å«æ‰€æœ‰å­—æ®µæ˜ å°„ï¼‰
- âœ… `EmployeeOperationLog.java` - æ“ä½œæ—¥å¿—å®ä½“

#### 1.2 æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆDTOï¼‰
- âœ… `EmployeeCreateRequest.java` - åˆ›å»ºå‘˜å·¥è¯·æ±‚
- âœ… `EmployeeUpdateRequest.java` - æ›´æ–°å‘˜å·¥è¯·æ±‚
- âœ… `EmployeeQueryRequest.java` - æŸ¥è¯¢å‘˜å·¥è¯·æ±‚
- âœ… `EmployeeStatusUpdateRequest.java` - çŠ¶æ€æ›´æ–°è¯·æ±‚

#### 1.3 è§†å›¾å¯¹è±¡ï¼ˆVOï¼‰
- âœ… `EmployeeVO.java` - å‘˜å·¥åˆ—è¡¨VO
- âœ… `EmployeeDetailVO.java` - å‘˜å·¥è¯¦æƒ…VO
- âœ… `EmployeeStatisticsVO.java` - ç»Ÿè®¡æ•°æ®VO
- âœ… `OperationLogVO.java` - æ“ä½œæ—¥å¿—VO

#### 1.4 æ•°æ®è®¿é—®å±‚ï¼ˆMapperï¼‰
- âœ… `EmployeeMapper.java` - åŒ…å«è‡ªå®šä¹‰SQLæŸ¥è¯¢
- âœ… `EmployeeOperationLogMapper.java` - æ“ä½œæ—¥å¿—Mapper

#### 1.5 ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆServiceï¼‰
- âœ… `EmployeeService.java` - æœåŠ¡æ¥å£
- âœ… `EmployeeServiceImpl.java` - æœåŠ¡å®ç°ï¼ˆåŒ…å«æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ï¼‰

#### 1.6 æ§åˆ¶å™¨å±‚ï¼ˆControllerï¼‰
- âœ… `EmployeeController.java` - REST APIæ§åˆ¶å™¨

#### 1.7 å®šæ—¶ä»»åŠ¡ï¼ˆScheduled Tasksï¼‰
- âœ… `WorkYearUpdateTask.java` - å·¥é¾„è‡ªåŠ¨æ›´æ–°ï¼ˆæ¯æœˆ1å·å‡Œæ™¨1ç‚¹ï¼‰
- âœ… `BirthdayReminderTask.java` - ç”Ÿæ—¥æé†’ï¼ˆæ¯å¤©æ—©ä¸Š9ç‚¹ï¼‰
- âœ… `ProbationReminderTask.java` - è½¬æ­£æé†’ï¼ˆæ¯å¤©æ—©ä¸Š9ç‚¹ï¼‰

### 2. å‰ç«¯ä»£ç æ›´æ–°

#### 2.1 APIå±‚æ›´æ–°
- âœ… ç§»é™¤æ‰€æœ‰Mockæ•°æ®è°ƒç”¨
- âœ… è¿æ¥åˆ°åç«¯REST API
- âœ… é€‚é…åç«¯å“åº”æ ¼å¼ï¼ˆMyBatis Plusåˆ†é¡µæ ¼å¼ï¼‰
- âœ… æ·»åŠ å”¯ä¸€æ€§éªŒè¯æ¥å£ï¼ˆé‚®ç®±ã€æ‰‹æœºå·ï¼‰

#### 2.2 ç±»å‹å®šä¹‰
- âœ… TypeScriptç±»å‹å®šä¹‰ä¸åç«¯DTO/VOå®Œå…¨åŒ¹é…
- âœ… æšä¸¾ç±»å‹å®šä¹‰ä¸€è‡´

#### 2.3 Storeå±‚
- âœ… å·²é€‚é…åç«¯APIè°ƒç”¨
- âœ… æ— éœ€ä¿®æ”¹

### 3. æµ‹è¯•æ•°æ®
- âœ… åˆ›å»ºæµ‹è¯•æ•°æ®SQLè„šæœ¬ `insert_test_employees.sql`
- âœ… åŒ…å«6æ¡æµ‹è¯•å‘˜å·¥æ•°æ®
- âœ… åŒ…å«æ“ä½œæ—¥å¿—æ•°æ®

---

## ğŸ”Œ APIæ¥å£æ¸…å•

### å‘˜å·¥ç®¡ç†æ¥å£

| HTTPæ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | å‰ç«¯æ–¹æ³• |
|---------|------|------|---------|
| GET | `/api/employees` | åˆ†é¡µæŸ¥è¯¢å‘˜å·¥åˆ—è¡¨ | `getEmployeeList()` |
| GET | `/api/employees/{id}` | è·å–å‘˜å·¥è¯¦æƒ… | `getEmployeeDetail()` |
| POST | `/api/employees` | åˆ›å»ºå‘˜å·¥ | `createEmployee()` |
| PUT | `/api/employees/{id}` | æ›´æ–°å‘˜å·¥ä¿¡æ¯ | `updateEmployee()` |
| PUT | `/api/employees/{id}/status` | æ›´æ–°å‘˜å·¥çŠ¶æ€ | `updateEmployeeStatus()` |
| DELETE | `/api/employees/{id}` | åˆ é™¤å‘˜å·¥ | `deleteEmployee()` |
| GET | `/api/employees/statistics` | è·å–ç»Ÿè®¡æ•°æ® | `getStatistics()` |
| GET | `/api/employees/{id}/logs` | è·å–æ“ä½œè®°å½• | `getOperationLogs()` |
| GET | `/api/employees/check-email` | æ£€æŸ¥é‚®ç®±æ˜¯å¦å­˜åœ¨ | `checkEmailExists()` |
| GET | `/api/employees/check-phone` | æ£€æŸ¥æ‰‹æœºå·æ˜¯å¦å­˜åœ¨ | `checkPhoneExists()` |

### è¯·æ±‚/å“åº”æ ¼å¼

#### åˆ†é¡µå“åº”æ ¼å¼ï¼ˆMyBatis Plusï¼‰
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [],      // æ•°æ®åˆ—è¡¨
    "total": 100,       // æ€»è®°å½•æ•°
    "current": 1,       // å½“å‰é¡µ
    "size": 20          // æ¯é¡µå¤§å°
  }
}
```

#### å•ä¸ªå¯¹è±¡å“åº”æ ¼å¼
```json
{
  "code": 200,
  "message": "success",
  "data": {
    // å¯¹è±¡æ•°æ®
  }
}
```

---

## ğŸ—„ï¸ æ•°æ®åº“è¡¨ç»“æ„

### sys_employeeï¼ˆå‘˜å·¥è¡¨ï¼‰
- ä¸»é”®: `id` (å‘˜å·¥ç¼–å·)
- åŒ…å«æ‰€æœ‰å‘˜å·¥ä¿¡æ¯å­—æ®µ
- æ”¯æŒé€»è¾‘åˆ é™¤ (`is_deleted`)
- æ”¯æŒä¹è§‚é” (`version`)

### sys_employee_operation_logï¼ˆæ“ä½œæ—¥å¿—è¡¨ï¼‰
- è®°å½•æ‰€æœ‰å‘˜å·¥æ“ä½œå†å²
- åŒ…å«æ“ä½œäººã€æ“ä½œæ—¶é—´ã€è¯¦ç»†ä¿¡æ¯ç­‰

---

## ğŸš€ å¦‚ä½•å¯åŠ¨å’Œæµ‹è¯•

### 1. åç«¯å¯åŠ¨

```bash
cd oa-system-backend
mvn spring-boot:run
```

åç«¯å°†åœ¨ `http://localhost:8080` å¯åŠ¨

### 2. å‰ç«¯å¯åŠ¨

```bash
cd oa-system-frontend
npm install
npm run dev
```

å‰ç«¯å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### 3. æ•°æ®åº“å‡†å¤‡

1. ç¡®ä¿MySQLæœåŠ¡è¿è¡Œ
2. æ‰§è¡Œè¡¨ç»“æ„åˆ›å»ºè„šæœ¬ï¼š
   ```bash
   mysql -u root -p < å»ºåº“å’Œè¡¨SQL/sys_employee.sql
   mysql -u root -p < å»ºåº“å’Œè¡¨SQL/sys_employee_operation_log.sql
   ```
3. æ’å…¥æµ‹è¯•æ•°æ®ï¼š
   ```bash
   mysql -u root -p oa_system < å»ºåº“å’Œè¡¨SQL/insert_test_employees.sql
   ```

### 4. æµ‹è¯•æ¥å£

#### ä½¿ç”¨curlæµ‹è¯•ï¼š

```bash
# 1. è·å–å‘˜å·¥åˆ—è¡¨
curl -X GET "http://localhost:8080/api/employees?page=1&pageSize=20"

# 2. åˆ›å»ºå‘˜å·¥
curl -X POST "http://localhost:8080/api/employees" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "name": "æµ‹è¯•å‘˜å·¥",
    "gender": "male",
    "phone": "13800138999",
    "email": "test@example.com",
    "departmentId": "DEPT001",
    "position": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
    "joinDate": "2024-01-01"
  }'

# 3. è·å–ç»Ÿè®¡æ•°æ®
curl -X GET "http://localhost:8080/api/employees/statistics"

# 4. æ£€æŸ¥é‚®ç®±æ˜¯å¦å­˜åœ¨
curl -X GET "http://localhost:8080/api/employees/check-email?email=test@example.com"
```

---

## ğŸ“ å…³é”®ç‰¹æ€§è¯´æ˜

### 1. å‘˜å·¥ç¼–å·è‡ªåŠ¨ç”Ÿæˆ
- æ ¼å¼ï¼š`EMP + YYYYMMDD + åºå·`
- ç¤ºä¾‹ï¼š`EMP20250113001`
- åœ¨åˆ›å»ºå‘˜å·¥æ—¶è‡ªåŠ¨ç”Ÿæˆ

### 2. å·¥é¾„è‡ªåŠ¨è®¡ç®—
- åŸºäºå…¥èŒæ—¥æœŸè‡ªåŠ¨è®¡ç®—
- æ¯æœˆ1å·å‡Œæ™¨1ç‚¹è‡ªåŠ¨æ›´æ–°
- æ”¯æŒæ‰‹åŠ¨è§¦å‘æ›´æ–°

### 3. è¯•ç”¨æœŸç®¡ç†
- é»˜è®¤è¯•ç”¨æœŸï¼š3ä¸ªæœˆ
- è‡ªåŠ¨è®¡ç®—è¯•ç”¨æœŸç»“æŸæ—¥æœŸ
- è½¬æ­£æé†’ï¼šåˆ°æœŸå‰7å¤©æ¯å¤©æ—©ä¸Š9ç‚¹æé†’

### 4. æ•°æ®éªŒè¯
- é‚®ç®±å”¯ä¸€æ€§éªŒè¯
- æ‰‹æœºå·å”¯ä¸€æ€§éªŒè¯
- éƒ¨é—¨å­˜åœ¨æ€§éªŒè¯
- ä¸Šçº§å­˜åœ¨æ€§éªŒè¯
- æ‰€æœ‰éªŒè¯åœ¨ä¸šåŠ¡å±‚å®ç°

### 5. æ“ä½œæ—¥å¿—
- è®°å½•æ‰€æœ‰å‘˜å·¥æ“ä½œ
- åŒ…å«æ“ä½œäººã€æ“ä½œæ—¶é—´ã€è¯¦ç»†ä¿¡æ¯
- æ”¯æŒåˆ†é¡µæŸ¥è¯¢

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ä¾èµ–æ¨¡å—

å‘˜å·¥æ¨¡å—ä¾èµ–ä»¥ä¸‹æ¨¡å—ï¼ˆå°šæœªå®ç°ï¼‰ï¼š
- **Departmentæ¨¡å—**ï¼šå‘˜å·¥éœ€è¦å…³è”éƒ¨é—¨
- å½“å‰è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ç¡¬ç¼–ç çš„éƒ¨é—¨ID `DEPT001`

### 2. è®¤è¯æˆæƒ

- æ‰€æœ‰APIéƒ½éœ€è¦JWT Tokenè®¤è¯
- éœ€è¦å…ˆè°ƒç”¨ `/api/auth/login` è·å–Token
- åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼š`Authorization: Bearer YOUR_TOKEN`

### 3. CORSé…ç½®

å‰ç«¯ï¼ˆ`localhost:3000`ï¼‰è®¿é—®åç«¯ï¼ˆ`localhost:8080`ï¼‰éœ€è¦CORSæ”¯æŒã€‚
åç«¯å·²é…ç½®CORSï¼Œå…è®¸è·¨åŸŸè¯·æ±‚ã€‚

### 4. æƒé™æ§åˆ¶

åç«¯ä»£ç ä¸­å·²é¢„ç•™æƒé™æ§åˆ¶æ¥å£ï¼Œä½†å®é™…æƒé™éªŒè¯é€»è¾‘éœ€è¦åœ¨Spring Securityé…ç½®ä¸­å®ç°ã€‚

---

## ğŸ“š åç»­å·¥ä½œ

### å¾…å®ç°åŠŸèƒ½ï¼š

1. **éƒ¨é—¨ç®¡ç†æ¨¡å—**
   - å®ç°Department CRUD
   - å‘˜å·¥å…³è”çœŸå®éƒ¨é—¨æ•°æ®

2. **å¯¼å…¥å¯¼å‡ºåŠŸèƒ½**
   - å®ç°Excelæ‰¹é‡å¯¼å…¥å‘˜å·¥
   - å®ç°Excelå¯¼å‡ºå‘˜å·¥åˆ—è¡¨

3. **é«˜çº§ç­›é€‰**
   - å¤šæ¡ä»¶ç»„åˆç­›é€‰
   - é«˜çº§æœç´¢åŠŸèƒ½

4. **æƒé™æ§åˆ¶**
   - å®ç°æ•°æ®çº§æƒé™æ§åˆ¶
   - ä¸åŒè§’è‰²æŸ¥çœ‹ä¸åŒèŒƒå›´æ•°æ®

5. **é€šçŸ¥åŠŸèƒ½**
   - å®ç°ç”Ÿæ—¥ç¥ç¦é€šçŸ¥
   - å®ç°è½¬æ­£æé†’é€šçŸ¥

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šå‰ç«¯æ— æ³•è¿æ¥åç«¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤åç«¯å·²å¯åŠ¨ï¼ˆ`http://localhost:8080`ï¼‰
2. ç¡®è®¤å‰ç«¯ä»£ç†é…ç½®æ­£ç¡®ï¼ˆ`vite.config.ts`ï¼‰
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ç½‘ç»œè¯·æ±‚

### é—®é¢˜2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `application.yml` æ•°æ®åº“é…ç½®
2. ç¡®è®¤MySQLæœåŠ¡è¿è¡Œ
3. ç¡®è®¤æ•°æ®åº“ `oa_system` å­˜åœ¨

### é—®é¢˜3ï¼š401æœªæˆæƒé”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å…ˆç™»å½•è·å–Token
2. ç¡®è®¤Tokenæœ‰æ•ˆ
3. åœ¨è¯·æ±‚å¤´ä¸­æ­£ç¡®æ·»åŠ Token

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åç«¯æ—¥å¿—ï¼š`oa-system-backend/logs`
2. å‰ç«¯æ§åˆ¶å°ï¼šæµè§ˆå™¨å¼€å‘è€…å·¥å…·
3. æ•°æ®åº“æ—¥å¿—ï¼šMySQLé”™è¯¯æ—¥å¿—

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**åˆ›å»ºæ—¥æœŸ**: 2025-01-13
**æœ€åæ›´æ–°**: 2025-01-13
