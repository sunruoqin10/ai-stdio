# è¯·å‡ç®¡ç†æ¨¡å— - ä¸šåŠ¡è§„åˆ™

> **æ¨¡å—**: leave
> **ç‰ˆæœ¬**: v1.0.0
> **æ›´æ–°æ—¥æœŸ**: 2026-01-18

---

## ğŸ“‹ ç›®å½•

- [è¯·å‡ç±»å‹è§„åˆ™](#è¯·å‡ç±»å‹è§„åˆ™)
- [è¯·å‡çŠ¶æ€è§„åˆ™](#è¯·å‡çŠ¶æ€è§„åˆ™)
- [å®¡æ‰¹æµç¨‹è§„åˆ™](#å®¡æ‰¹æµç¨‹è§„åˆ™)
- [å¹´å‡ç®¡ç†è§„åˆ™](#å¹´å‡ç®¡ç†è§„åˆ™)
- [è¯·å‡æ—¶é•¿è®¡ç®—è§„åˆ™](#è¯·å‡æ—¶é•¿è®¡ç®—è§„åˆ™)
- [è¯·å‡æ—¶é—´å†²çªè§„åˆ™](#è¯·å‡æ—¶é—´å†²çªè§„åˆ™)
- [å¤–é”®çº¦æŸè§„åˆ™](#å¤–é”®çº¦æŸè§„åˆ™)
- [æ£€æŸ¥çº¦æŸè§„åˆ™](#æ£€æŸ¥çº¦æŸè§„åˆ™)
- [ä¸šåŠ¡éªŒè¯è§„åˆ™](#ä¸šåŠ¡éªŒè¯è§„åˆ™)

---

## è¯·å‡ç±»å‹è§„åˆ™

### è¯·å‡ç±»å‹å®šä¹‰

| ç±»å‹ | ç¼–ç  | è¯´æ˜ | éœ€è¦é™„ä»¶ | æ‰£å‡å¹´å‡ | å®¡æ‰¹å±‚çº§ |
|------|------|------|---------|---------|---------|
| å¹´å‡ | annual | å¸¦è–ªå¹´å‡ | å¦ | æ˜¯ | æ ¹æ®å¤©æ•° |
| ç—…å‡ | sick | å› ç—…è¯·å‡ | å»ºè®® | å¦ | æ ¹æ®å¤©æ•° |
| äº‹å‡ | personal | ä¸ªäººäº‹åŠ¡ | å¦ | å¦ | æ ¹æ®å¤©æ•° |
| è°ƒä¼‘ | comp_time | åŠ ç­è°ƒä¼‘ | å¦ | å¦ | æ ¹æ®å¤©æ•° |
| å©šå‡ | marriage | ç»“å©šè¯·å‡ | æ˜¯ | å¦ | æ ¹æ®å¤©æ•° |
| äº§å‡ | maternity | ç”Ÿè‚²è¯·å‡ | æ˜¯ | å¦ | æ ¹æ®å¤©æ•° |

### è¯·å‡ç±»å‹è§„åˆ™

1. **å¹´å‡**
   - éœ€æå‰ç”³è¯·
   - éœ€æœ‰å¹´å‡ä½™é¢
   - å®¡æ‰¹é€šè¿‡åè‡ªåŠ¨æ‰£å‡å¹´å‡
   - æ”¯æŒåŠå¤©è¯·å‡

2. **ç—…å‡**
   - å»ºè®®æä¾›åŒ»é™¢è¯æ˜
   - ä¸æ‰£å‡å¹´å‡
   - æ”¯æŒåŠå¤©è¯·å‡

3. **äº‹å‡**
   - æ‰£é™¤å·¥èµ„
   - ä¸æ‰£å‡å¹´å‡
   - æ”¯æŒåŠå¤©è¯·å‡

4. **è°ƒä¼‘**
   - éœ€æœ‰åŠ ç­æ—¶é•¿
   - ä¸æ‰£å‡å¹´å‡
   - æ”¯æŒåŠå¤©è¯·å‡

5. **å©šå‡**
   - éœ€æä¾›ç»“å©šè¯æ˜
   - æ ‡å‡†å‡æœŸ3å¤©
   - æ™šå©šå¯å»¶é•¿è‡³15å¤©
   - ä¸æ‰£å‡å¹´å‡

6. **äº§å‡**
   - éœ€æä¾›ç”Ÿè‚²è¯æ˜
   - æ ‡å‡†å‡æœŸ98å¤©
   - éš¾äº§å¢åŠ 15å¤©
   - å¤šèƒèƒæ¯å¤šä¸€å©´å¢åŠ 15å¤©
   - ä¸æ‰£å‡å¹´å‡

---

## è¯·å‡çŠ¶æ€è§„åˆ™

### è¯·å‡çŠ¶æ€å®šä¹‰

| çŠ¶æ€ | ç¼–ç  | è¯´æ˜ | å¯æ‰§è¡Œæ“ä½œ |
|------|------|------|-----------|
| è‰ç¨¿ | draft | æœªæäº¤çš„ç”³è¯· | ç¼–è¾‘ã€åˆ é™¤ã€æäº¤ |
| å¾…å®¡æ‰¹ | pending | å·²æäº¤å¾…å®¡æ‰¹ | æ’¤é”€ |
| å®¡æ‰¹ä¸­ | approving | æ­£åœ¨å®¡æ‰¹ä¸­ | æ—  |
| å·²é€šè¿‡ | approved | å®¡æ‰¹é€šè¿‡ | æ—  |
| å·²æ‹’ç» | rejected | å®¡æ‰¹æ‹’ç» | é‡æ–°æäº¤ |
| å·²å–æ¶ˆ | cancelled | å·²æ’¤é”€ | æ—  |

### çŠ¶æ€è½¬æ¢è§„åˆ™

```
è‰ç¨¿ â†’ å¾…å®¡æ‰¹ â†’ å®¡æ‰¹ä¸­ â†’ å·²é€šè¿‡
  â†“        â†“         â†“
å·²æ’¤é”€   å·²æ‹’ç»   å·²æ‹’ç»
           â†“
        é‡æ–°æäº¤ â†’ å¾…å®¡æ‰¹
```

### çŠ¶æ€è½¬æ¢è¯´æ˜

1. **è‰ç¨¿ â†’ å¾…å®¡æ‰¹**
   - æ¡ä»¶ï¼šç”¨æˆ·æäº¤ç”³è¯·
   - éªŒè¯ï¼šå¹´å‡ä½™é¢å……è¶³ï¼ˆå¹´å‡ç±»å‹ï¼‰

2. **å¾…å®¡æ‰¹ â†’ å®¡æ‰¹ä¸­**
   - æ¡ä»¶ï¼šä¸€çº§å®¡æ‰¹é€šè¿‡
   - æ“ä½œï¼šè¿›å…¥ä¸‹ä¸€çº§å®¡æ‰¹

3. **å®¡æ‰¹ä¸­ â†’ å·²é€šè¿‡**
   - æ¡ä»¶ï¼šæ‰€æœ‰å®¡æ‰¹å±‚çº§é€šè¿‡
   - æ“ä½œï¼šæ‰£å‡å¹´å‡ï¼ˆå¹´å‡ç±»å‹ï¼‰

4. **å¾…å®¡æ‰¹ â†’ å·²æ‹’ç»**
   - æ¡ä»¶ï¼šä»»æ„å®¡æ‰¹å±‚çº§æ‹’ç»
   - æ“ä½œï¼šè®°å½•æ‹’ç»åŸå› 

5. **å®¡æ‰¹ä¸­ â†’ å·²æ‹’ç»**
   - æ¡ä»¶ï¼šä»»æ„å®¡æ‰¹å±‚çº§æ‹’ç»
   - æ“ä½œï¼šè®°å½•æ‹’ç»åŸå› 

6. **å¾…å®¡æ‰¹ â†’ å·²å–æ¶ˆ**
   - æ¡ä»¶ï¼šç”¨æˆ·æ’¤é”€ç”³è¯·
   - æ“ä½œï¼šåˆ é™¤å®¡æ‰¹è®°å½•

7. **å·²æ‹’ç» â†’ å¾…å®¡æ‰¹**
   - æ¡ä»¶ï¼šç”¨æˆ·é‡æ–°æäº¤
   - æ“ä½œï¼šåˆ›å»ºæ–°çš„å®¡æ‰¹æµç¨‹

---

## å®¡æ‰¹æµç¨‹è§„åˆ™

### å®¡æ‰¹å±‚çº§å®šä¹‰

| è¯·å‡å¤©æ•° | å®¡æ‰¹å±‚çº§ | å®¡æ‰¹äºº |
|---------|---------|--------|
| â‰¤3å¤© | 1çº§ | éƒ¨é—¨è´Ÿè´£äºº |
| 4-7å¤© | 2çº§ | éƒ¨é—¨è´Ÿè´£äºº + äººäº‹ä¸“å‘˜ |
| >7å¤© | 3çº§ | éƒ¨é—¨è´Ÿè´£äºº + äººäº‹ä¸“å‘˜ + æ€»ç»ç† |

### å®¡æ‰¹æµç¨‹è¯´æ˜

1. **ä¸€çº§å®¡æ‰¹ï¼ˆâ‰¤3å¤©ï¼‰**
   - å®¡æ‰¹äººï¼šéƒ¨é—¨è´Ÿè´£äºº
   - é€šè¿‡æ¡ä»¶ï¼šéƒ¨é—¨è´Ÿè´£äººæ‰¹å‡†
   - æ‹’ç»æ¡ä»¶ï¼šéƒ¨é—¨è´Ÿè´£äººæ‹’ç»

2. **äºŒçº§å®¡æ‰¹ï¼ˆ4-7å¤©ï¼‰**
   - ç¬¬ä¸€çº§ï¼šéƒ¨é—¨è´Ÿè´£äºº
   - ç¬¬äºŒçº§ï¼šäººäº‹ä¸“å‘˜
   - é€šè¿‡æ¡ä»¶ï¼šä¸¤äººéƒ½æ‰¹å‡†
   - æ‹’ç»æ¡ä»¶ï¼šä»»æ„ä¸€äººæ‹’ç»

3. **ä¸‰çº§å®¡æ‰¹ï¼ˆ>7å¤©ï¼‰**
   - ç¬¬ä¸€çº§ï¼šéƒ¨é—¨è´Ÿè´£äºº
   - ç¬¬äºŒçº§ï¼šäººäº‹ä¸“å‘˜
   - ç¬¬ä¸‰çº§ï¼šæ€»ç»ç†
   - é€šè¿‡æ¡ä»¶ï¼šä¸‰äººéƒ½æ‰¹å‡†
   - æ‹’ç»æ¡ä»¶ï¼šä»»æ„ä¸€äººæ‹’ç»

### å®¡æ‰¹è§„åˆ™

1. **å®¡æ‰¹é¡ºåº**
   - æŒ‰å®¡æ‰¹å±‚çº§é¡ºåºå®¡æ‰¹
   - ä¸Šä¸€çº§é€šè¿‡åæ‰èƒ½è¿›å…¥ä¸‹ä¸€çº§
   - ä»»æ„ä¸€çº§æ‹’ç»åˆ™æµç¨‹ç»“æŸ

2. **å®¡æ‰¹æƒé™**
   - åªæœ‰å½“å‰å®¡æ‰¹äººå¯ä»¥å®¡æ‰¹
   - å®¡æ‰¹äººä¸èƒ½å®¡æ‰¹è‡ªå·±çš„ç”³è¯·
   - å®¡æ‰¹äººä¸èƒ½é‡å¤å®¡æ‰¹åŒä¸€ç”³è¯·

3. **å®¡æ‰¹æ„è§**
   - é€šè¿‡æ—¶æ„è§å¯é€‰
   - æ‹’ç»æ—¶æ„è§å¿…å¡«
   - æ„è§é•¿åº¦1-500å­—ç¬¦

4. **å®¡æ‰¹æ—¶æ•ˆ**
   - å¾…å®¡æ‰¹ç”³è¯·éœ€è¦åœ¨3ä¸ªå·¥ä½œæ—¥å†…å¤„ç†
   - è¶…æ—¶è‡ªåŠ¨æé†’å®¡æ‰¹äºº
   - è¶…æ—¶7å¤©è‡ªåŠ¨å‡çº§åˆ°ä¸Šçº§

---

## å¹´å‡ç®¡ç†è§„åˆ™

### å¹´å‡é¢åº¦æ ‡å‡†

| å·¥ä½œå¹´é™ | å¹´å‡å¤©æ•° | è¯´æ˜ |
|---------|---------|------|
| <1å¹´ | 5å¤© | æ–°å‘˜å·¥ |
| 1-9å¹´ | 10å¤© | æ™®é€šå‘˜å·¥ |
| 10-19å¹´ | 15å¤© | èµ„æ·±å‘˜å·¥ |
| â‰¥20å¹´ | 20å¤© | é«˜çº§å‘˜å·¥ |

### å¹´å‡é¢åº¦è®¡ç®—

```java
public BigDecimal calculateQuota(Integer workYears) {
    if (workYears < 1) {
        return new BigDecimal("5");
    } else if (workYears < 10) {
        return new BigDecimal("10");
    } else if (workYears < 20) {
        return new BigDecimal("15");
    } else {
        return new BigDecimal("20");
    }
}
```

### å¹´å‡ä½¿ç”¨è§„åˆ™

1. **å¹´å‡ä½™é¢**
   - å¹´å‡ä½™é¢ = å¹´å‡æ€»é¢ - å·²ä½¿ç”¨å¤©æ•°
   - å¹´å‡ä½™é¢ä¸èƒ½ä¸ºè´Ÿæ•°
   - å¹´å‡ä½™é¢è·¨å¹´ä¸ç´¯è®¡

2. **å¹´å‡æ‰£å‡**
   - å®¡æ‰¹é€šè¿‡åè‡ªåŠ¨æ‰£å‡
   - æ‰£å‡é‡‘é¢ = è¯·å‡æ—¶é•¿
   - è®°å½•ä½¿ç”¨æ—¥å¿—

3. **å¹´å‡å›é€€**
   - ç”³è¯·è¢«æ‹’ç»åè‡ªåŠ¨å›é€€
   - ç”³è¯·è¢«æ’¤é”€åè‡ªåŠ¨å›é€€
   - è®°å½•å›é€€æ—¥å¿—

4. **å¹´å‡ä½™é¢ä¸è¶³**
   - ä½™é¢ä¸è¶³æ—¶ç¦æ­¢æäº¤å¹´å‡ç”³è¯·
   - æç¤ºç”¨æˆ·å‰©ä½™å¹´å‡å¤©æ•°
   - å»ºè®®ç”¨æˆ·é€‰æ‹©å…¶ä»–è¯·å‡ç±»å‹

### å¹´å‡ä½™é¢è­¦å‘Š

| ä½™é¢ | è­¦å‘Šçº§åˆ« | æç¤ºä¿¡æ¯ |
|------|---------|---------|
| â‰¥3å¤© | æ­£å¸¸ | æ— æç¤º |
| 1-3å¤© | è­¦å‘Š | å¹´å‡ä½™é¢ä¸è¶³3å¤© |
| <1å¤© | ä¸¥é‡ | å¹´å‡ä½™é¢ä¸è¶³1å¤© |

---

## è¯·å‡æ—¶é•¿è®¡ç®—è§„åˆ™

### è®¡ç®—è§„åˆ™

1. **å·¥ä½œæ—¥è®¡ç®—**
   - åªè®¡ç®—å·¥ä½œæ—¥ï¼ˆå‘¨ä¸€åˆ°å‘¨äº”ï¼‰
   - æ’é™¤æ³•å®šèŠ‚å‡æ—¥
   - æ’é™¤è°ƒä¼‘å·¥ä½œæ—¥

2. **æ—¶é•¿å•ä½**
   - 1å¤© = 8å°æ—¶
   - æ”¯æŒåŠå¤©è¯·å‡ï¼ˆ0.5å¤©ï¼‰
   - æ”¯æŒæŒ‰å°æ—¶è¯·å‡ï¼ˆ0.125å¤©ï¼‰

3. **è®¡ç®—å…¬å¼**
   ```
   æ—¶é•¿(å¤©) = å·¥ä½œæ—¥å¤©æ•° + (å·¥ä½œæ—¥å°æ—¶æ•° / 8)
   ```

### è®¡ç®—ç¤ºä¾‹

| å¼€å§‹æ—¶é—´ | ç»“æŸæ—¶é—´ | å·¥ä½œæ—¥ | æ—¶é•¿(å¤©) |
|---------|---------|--------|---------|
| 2026-01-20 09:00 | 2026-01-20 18:00 | 1 | 1.0 |
| 2026-01-20 09:00 | 2026-01-20 13:00 | 1 | 0.5 |
| 2026-01-20 09:00 | 2026-01-22 18:00 | 3 | 3.0 |
| 2026-01-20 09:00 | 2026-01-23 18:00 | 4 | 4.0 |

### è·¨å¤©è®¡ç®—

1. **è·¨å‘¨æœ«**
   - å‘¨æœ«ä¸è®¡å…¥å·¥ä½œæ—¥
   - è‡ªåŠ¨è·³è¿‡å‘¨æœ«
   - åªè®¡ç®—å·¥ä½œæ—¥

2. **è·¨èŠ‚å‡æ—¥**
   - èŠ‚å‡æ—¥ä¸è®¡å…¥å·¥ä½œæ—¥
   - è‡ªåŠ¨è·³è¿‡èŠ‚å‡æ—¥
   - åªè®¡ç®—å·¥ä½œæ—¥

3. **è·¨æœˆ**
   - æŒ‰å®é™…å·¥ä½œæ—¥è®¡ç®—
   - ä¸è€ƒè™‘æœˆä»½ç•Œé™
   - åªè®¡ç®—å·¥ä½œæ—¥

---

## è¯·å‡æ—¶é—´å†²çªè§„åˆ™

### å†²çªæ£€æµ‹è§„åˆ™

1. **å†²çªå®šä¹‰**
   - æ—¶é—´æ®µé‡å 
   - æ—¶é—´æ®µåŒ…å«
   - æ—¶é—´æ®µè¢«åŒ…å«

2. **å†²çªæ£€æµ‹èŒƒå›´**
   - åªæ£€æµ‹å¾…å®¡æ‰¹ã€å®¡æ‰¹ä¸­ã€å·²é€šè¿‡çš„ç”³è¯·
   - ä¸æ£€æµ‹è‰ç¨¿ã€å·²æ‹’ç»ã€å·²å–æ¶ˆçš„ç”³è¯·
   - ä¸æ£€æµ‹å…¶ä»–å‘˜å·¥çš„ç”³è¯·

3. **å†²çªæ£€æµ‹é€»è¾‘**
   ```
   å†²çªæ¡ä»¶ï¼š
   (å¼€å§‹æ—¶é—´ <= å…¶ä»–å¼€å§‹æ—¶é—´ AND ç»“æŸæ—¶é—´ > å…¶ä»–å¼€å§‹æ—¶é—´)
   OR (å¼€å§‹æ—¶é—´ < å…¶ä»–ç»“æŸæ—¶é—´ AND ç»“æŸæ—¶é—´ >= å…¶ä»–ç»“æŸæ—¶é—´)
   OR (å¼€å§‹æ—¶é—´ >= å…¶ä»–å¼€å§‹æ—¶é—´ AND ç»“æŸæ—¶é—´ <= å…¶ä»–ç»“æŸæ—¶é—´)
   ```

### å†²çªå¤„ç†

1. **åˆ›å»ºç”³è¯·æ—¶**
   - æ£€æµ‹æ—¶é—´å†²çª
   - å†²çªæ—¶æç¤ºç”¨æˆ·
   - ç¦æ­¢åˆ›å»ºå†²çªç”³è¯·

2. **æ›´æ–°ç”³è¯·æ—¶**
   - æ£€æµ‹æ—¶é—´å†²çª
   - æ’é™¤å½“å‰ç”³è¯·
   - å†²çªæ—¶æç¤ºç”¨æˆ·
   - ç¦æ­¢æ›´æ–°ä¸ºå†²çªæ—¶é—´

3. **å†²çªæç¤º**
   ```
   "è¯·å‡æ—¶é—´ä¸ä»¥ä¸‹ç”³è¯·å†²çªï¼š
   - LEAVE20260115001: 2026-01-20 è‡³ 2026-01-22"
   ```

---

## å¤–é”®çº¦æŸè§„åˆ™

### å¤–é”®çº¦æŸè¯´æ˜

ç”±äºæ•°æ®åº“å±‚é¢çš„å¤–é”®çº¦æŸå¯èƒ½å½±å“æ€§èƒ½ï¼Œå»ºè®®åœ¨Serviceå±‚å®ç°å¤–é”®çº¦æŸé€»è¾‘ï¼š

### 1. ç”³è¯·äººå¤–é”®çº¦æŸ

```java
public void validateApplicantId(String applicantId) {
    Employee employee = employeeService.getById(applicantId);
    if (employee == null) {
        throw new BusinessException(3001, "ç”³è¯·äººä¸å­˜åœ¨");
    }
    if (employee.getIsDeleted() == 1) {
        throw new BusinessException(3002, "ç”³è¯·äººå·²è¢«åˆ é™¤");
    }
    if (!"active".equals(employee.getStatus())) {
        throw new BusinessException(3003, "ç”³è¯·äººçŠ¶æ€å¼‚å¸¸");
    }
}
```

### 2. éƒ¨é—¨å¤–é”®çº¦æŸ

```java
public void validateDepartmentId(String departmentId) {
    Department department = departmentService.getById(departmentId);
    if (department == null) {
        throw new BusinessException(3004, "éƒ¨é—¨ä¸å­˜åœ¨");
    }
    if (department.getIsDeleted() == 1) {
        throw new BusinessException(3005, "éƒ¨é—¨å·²è¢«åˆ é™¤");
    }
    if (!"active".equals(department.getStatus())) {
        throw new BusinessException(3006, "éƒ¨é—¨çŠ¶æ€å¼‚å¸¸");
    }
}
```

### 3. å®¡æ‰¹äººå¤–é”®çº¦æŸ

```java
public void validateApproverId(String approverId) {
    Employee employee = employeeService.getById(approverId);
    if (employee == null) {
        throw new BusinessException(3007, "å®¡æ‰¹äººä¸å­˜åœ¨");
    }
    if (employee.getIsDeleted() == 1) {
        throw new BusinessException(3008, "å®¡æ‰¹äººå·²è¢«åˆ é™¤");
    }
    if (!"active".equals(employee.getStatus())) {
        throw new BusinessException(3009, "å®¡æ‰¹äººçŠ¶æ€å¼‚å¸¸");
    }
}
```

### 4. ç”³è¯·å¤–é”®çº¦æŸ

```java
public void validateRequestId(String requestId) {
    LeaveRequest request = leaveRequestService.getById(requestId);
    if (request == null) {
        throw new BusinessException(3010, "è¯·å‡ç”³è¯·ä¸å­˜åœ¨");
    }
    if (request.getIsDeleted() == 1) {
        throw new BusinessException(3011, "è¯·å‡ç”³è¯·å·²è¢«åˆ é™¤");
    }
}
```

---

## æ£€æŸ¥çº¦æŸè§„åˆ™

### æ£€æŸ¥çº¦æŸè¯´æ˜

åœ¨Serviceå±‚å®ç°æ£€æŸ¥çº¦æŸé€»è¾‘ï¼š

### 1. è¯·å‡æ—¶é•¿æ£€æŸ¥

```java
public void validateDuration(BigDecimal duration) {
    if (duration == null) {
        throw new BusinessException(3012, "è¯·å‡æ—¶é•¿ä¸èƒ½ä¸ºç©º");
    }
    if (duration.compareTo(BigDecimal.ZERO) <= 0) {
        throw new BusinessException(3013, "è¯·å‡æ—¶é•¿å¿…é¡»å¤§äº0");
    }
    if (duration.compareTo(new BigDecimal("30")) > 0) {
        throw new BusinessException(3014, "è¯·å‡æ—¶é•¿ä¸èƒ½è¶…è¿‡30å¤©");
    }
}
```

### 2. æ—¶é—´èŒƒå›´æ£€æŸ¥

```java
public void validateTimeRange(LocalDateTime startTime, LocalDateTime endTime) {
    if (startTime == null) {
        throw new BusinessException(3015, "å¼€å§‹æ—¶é—´ä¸èƒ½ä¸ºç©º");
    }
    if (endTime == null) {
        throw new BusinessException(3016, "ç»“æŸæ—¶é—´ä¸èƒ½ä¸ºç©º");
    }
    if (!endTime.isAfter(startTime)) {
        throw new BusinessException(3017, "ç»“æŸæ—¶é—´å¿…é¡»æ™šäºå¼€å§‹æ—¶é—´");
    }
    if (startTime.isBefore(LocalDateTime.now())) {
        throw new BusinessException(3018, "å¼€å§‹æ—¶é—´ä¸èƒ½æ—©äºå½“å‰æ—¶é—´");
    }
}
```

### 3. å¹´å‡æ€»é¢æ£€æŸ¥

```java
public void validateAnnualTotal(BigDecimal annualTotal) {
    if (annualTotal == null) {
        throw new BusinessException(3019, "å¹´å‡æ€»é¢ä¸èƒ½ä¸ºç©º");
    }
    if (annualTotal.compareTo(BigDecimal.ZERO) < 0) {
        throw new BusinessException(3020, "å¹´å‡æ€»é¢ä¸èƒ½å°äº0");
    }
    if (annualTotal.compareTo(new BigDecimal("30")) > 0) {
        throw new BusinessException(3021, "å¹´å‡æ€»é¢ä¸èƒ½è¶…è¿‡30å¤©");
    }
}
```

### 4. å¹´å‡ä½¿ç”¨æ£€æŸ¥

```java
public void validateAnnualUsed(BigDecimal annualUsed, BigDecimal annualTotal) {
    if (annualUsed == null) {
        throw new BusinessException(3022, "å·²ä½¿ç”¨å¤©æ•°ä¸èƒ½ä¸ºç©º");
    }
    if (annualUsed.compareTo(BigDecimal.ZERO) < 0) {
        throw new BusinessException(3023, "å·²ä½¿ç”¨å¤©æ•°ä¸èƒ½å°äº0");
    }
    if (annualUsed.compareTo(annualTotal) > 0) {
        throw new BusinessException(3024, "å·²ä½¿ç”¨å¤©æ•°ä¸èƒ½å¤§äºå¹´å‡æ€»é¢");
    }
}
```

### 5. å¹´å‡ä½™é¢æ£€æŸ¥

```java
public void validateAnnualRemaining(BigDecimal annualRemaining, BigDecimal annualTotal, BigDecimal annualUsed) {
    if (annualRemaining == null) {
        throw new BusinessException(3025, "å‰©ä½™å¤©æ•°ä¸èƒ½ä¸ºç©º");
    }
    if (annualRemaining.compareTo(BigDecimal.ZERO) < 0) {
        throw new BusinessException(3026, "å‰©ä½™å¤©æ•°ä¸èƒ½å°äº0");
    }
    BigDecimal expectedRemaining = annualTotal.subtract(annualUsed);
    if (annualRemaining.compareTo(expectedRemaining) != 0) {
        throw new BusinessException(3027, "å‰©ä½™å¤©æ•°è®¡ç®—é”™è¯¯");
    }
}
```

---

## ä¸šåŠ¡éªŒè¯è§„åˆ™

### 1. åˆ›å»ºç”³è¯·éªŒè¯

```java
public void validateCreateRequest(LeaveCreateDTO createDTO) {
    validateType(createDTO.getType());
    validateTimeRange(createDTO.getStartTime(), createDTO.getEndTime());
    validateDuration(createDTO.getDuration());
    validateReason(createDTO.getReason());
    validateAttachments(createDTO.getAttachments());
    validateApplicantId(getCurrentUserId());
    validateDepartmentId(getCurrentUserDepartmentId());
    validateTimeConflict(getCurrentUserId(), createDTO.getStartTime(), createDTO.getEndTime(), null);
}
```

### 2. æ›´æ–°ç”³è¯·éªŒè¯

```java
public void validateUpdateRequest(LeaveRequest request, LeaveUpdateDTO updateDTO) {
    validateStatusForEdit(request.getStatus());
    validateVersion(request.getVersion(), updateDTO.getVersion());
    validateType(updateDTO.getType());
    validateTimeRange(updateDTO.getStartTime(), updateDTO.getEndTime());
    validateDuration(updateDTO.getDuration());
    validateReason(updateDTO.getReason());
    validateAttachments(updateDTO.getAttachments());
    validateTimeConflict(request.getApplicantId(), updateDTO.getStartTime(), updateDTO.getEndTime(), request.getId());
}
```

### 3. æäº¤ç”³è¯·éªŒè¯

```java
public void validateSubmitRequest(LeaveRequest request) {
    validateStatusForSubmit(request.getStatus());
    validateDuration(request.getDuration());
    validateAttachmentsForType(request.getType(), request.getAttachments());
    validateBalanceForAnnualLeave(request);
}
```

### 4. åˆ é™¤ç”³è¯·éªŒè¯

```java
public void validateDeleteRequest(LeaveRequest request) {
    validateStatusForDelete(request.getStatus());
    validateVersion(request.getVersion(), request.getVersion());
}
```

### 5. æ’¤é”€ç”³è¯·éªŒè¯

```java
public void validateCancelRequest(LeaveRequest request) {
    validateStatusForCancel(request.getStatus());
    validateVersion(request.getVersion(), request.getVersion());
}
```

### 6. é‡æ–°æäº¤ç”³è¯·éªŒè¯

```java
public void validateResubmitRequest(LeaveRequest request) {
    validateStatusForResubmit(request.getStatus());
    validateVersion(request.getVersion(), request.getVersion());
}
```

### 7. å®¡æ‰¹ç”³è¯·éªŒè¯

```java
public void validateApproveRequest(LeaveRequest request, ApprovalDTO approvalDTO) {
    validateStatusForApprove(request.getStatus());
    validateApproverPermission(request, getCurrentUserId());
    validateApprovalStatus(approvalDTO.getStatus());
    validateApprovalOpinion(approvalDTO.getStatus(), approvalDTO.getOpinion());
}
```

---

## é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 3001 | è¯·å‡ç”³è¯·ä¸å­˜åœ¨ |
| 3002 | å¹´å‡ä½™é¢ä¸è¶³ |
| 3003 | è¯·å‡æ—¶é—´å†²çª |
| 3004 | å®¡æ‰¹æƒé™ä¸è¶³ |
| 3005 | å½“å‰çŠ¶æ€ä¸å…è®¸æ“ä½œ |
| 3006 | è¯·å‡æ—¶é•¿è®¡ç®—é”™è¯¯ |
| 3007 | å®¡æ‰¹æµç¨‹é…ç½®é”™è¯¯ |
| 3008 | ç”³è¯·äººä¸å­˜åœ¨ |
| 3009 | ç”³è¯·äººå·²è¢«åˆ é™¤ |
| 3010 | ç”³è¯·äººçŠ¶æ€å¼‚å¸¸ |
| 3011 | éƒ¨é—¨ä¸å­˜åœ¨ |
| 3012 | éƒ¨é—¨å·²è¢«åˆ é™¤ |
| 3013 | éƒ¨é—¨çŠ¶æ€å¼‚å¸¸ |
| 3014 | å®¡æ‰¹äººä¸å­˜åœ¨ |
| 3015 | å®¡æ‰¹äººå·²è¢«åˆ é™¤ |
| 3016 | å®¡æ‰¹äººçŠ¶æ€å¼‚å¸¸ |
| 3017 | è¯·å‡ç”³è¯·å·²è¢«åˆ é™¤ |
| 3018 | è¯·å‡æ—¶é•¿ä¸èƒ½ä¸ºç©º |
| 3019 | è¯·å‡æ—¶é•¿å¿…é¡»å¤§äº0 |
| 3020 | è¯·å‡æ—¶é•¿ä¸èƒ½è¶…è¿‡30å¤© |
| 3021 | å¼€å§‹æ—¶é—´ä¸èƒ½ä¸ºç©º |
| 3022 | ç»“æŸæ—¶é—´ä¸èƒ½ä¸ºç©º |
| 3023 | ç»“æŸæ—¶é—´å¿…é¡»æ™šäºå¼€å§‹æ—¶é—´ |
| 3024 | å¼€å§‹æ—¶é—´ä¸èƒ½æ—©äºå½“å‰æ—¶é—´ |
| 3025 | å¹´å‡æ€»é¢ä¸èƒ½ä¸ºç©º |
| 3026 | å¹´å‡æ€»é¢ä¸èƒ½å°äº0 |
| 3027 | å¹´å‡æ€»é¢ä¸èƒ½è¶…è¿‡30å¤© |
| 3028 | å·²ä½¿ç”¨å¤©æ•°ä¸èƒ½ä¸ºç©º |
| 3029 | å·²ä½¿ç”¨å¤©æ•°ä¸èƒ½å°äº0 |
| 3030 | å·²ä½¿ç”¨å¤©æ•°ä¸èƒ½å¤§äºå¹´å‡æ€»é¢ |
| 3031 | å‰©ä½™å¤©æ•°ä¸èƒ½ä¸ºç©º |
| 3032 | å‰©ä½™å¤©æ•°ä¸èƒ½å°äº0 |
| 3033 | å‰©ä½™å¤©æ•°è®¡ç®—é”™è¯¯ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**åˆ›å»ºäºº**: AIå¼€å‘åŠ©æ‰‹
**æœ€åæ›´æ–°**: 2026-01-18
