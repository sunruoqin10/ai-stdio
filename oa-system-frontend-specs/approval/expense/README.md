# 费用报销模块规范

> **模块类型**: 审批流程
> **复杂度**: ⭐⭐⭐⭐
> **开发状态**: ✅ 已实现
> **版本**: v1.0.0
> **更新日期**: 2026-01-11

---

## 📂 文件列表

| 文件名 | 说明 | 目标读者 |
|--------|------|---------|
| [expense-spec.md](./expense-spec.md) | 原始规范文档(单层版) | 所有人 |
| [expense_Functional.md](./expense_Functional.md) | 功能需求规范(三层) ⭐ | 产品经理、业务分析师 |
| [expense_Technical.md](./expense_Technical.md) | 技术实现规范(三层) ⭐ | 前后端开发工程师 |
| [expense_Design.md](./expense_Design.md) | UI/UX设计规范(三层) ⭐ | UI设计师、前端开发 |

---

## 🎯 核心功能

- ✅ 发票上传和OCR识别
- ✅ 多级审批(部门→财务)
- ✅ 大额加签规则
- ✅ 打款管理
- ✅ 报表统计
- ✅ 发票唯一性验证
- ⭐ **Mock数据支持**
- ⭐ **工具函数库**
- ⭐ **完整的表单组件**

---

## 📖 模块简介

实现员工费用报销的全流程管理,包括发票上传、多级审批、财务审核、打款追踪等功能。

### 实现亮点

**1. 完整的Mock数据支持**
- 6个预置报销单(涵盖所有状态:草稿/部门审批/财务审批/已打款/已驳回)
- 4个打款记录(银行转账/现金/支票)
- 完整的费用明细数据
- 完整的发票数据(增值税专用发票/普通发票/电子发票)
- 大额加签示例(>5000需要总经理审批)

**2. 完整的报销表单组件**
- 动态费用明细管理(添加/删除/排序)
- 多发票上传和管理
- 发票OCR识别功能(模拟)
- 实时金额计算和验证
- 金额一致性检查(费用明细 vs 发票总金额)
- 完整的表单验证规则
- 草稿保存和提交功能

**3. 多级审批流程**
- 部门审批(部门主管/经理)
- 财务审批(财务部门人员)
- 大额加签规则:
  - 单笔>5000元: 需总经理审批
  - 单笔>10000元: 需总经理+特别审批人
- 审批意见记录
- 状态流转管理

**4. 发票管理功能**
- 发票唯一性验证(防止重复报销)
- 发票号码格式验证(8位或20位数字)
- 发票金额一致性验证
- OCR识别功能(模拟)
- 发票图片上传和管理

**5. 打款管理**
- 打款记录创建
- 打款方式:银行转账/现金/支票
- 打款凭证上传
- 打款状态追踪
- 打款失败处理

**6. 丰富的工具函数**
- 格式化函数(日期/金额/类型转换)
- 状态判断函数(可编辑/可删除/可提交/可撤回等)
- 发票验证函数
- 大额加签规则检查
- 报销单号生成(EXP+YYYYMMDD+4位随机数)
- 费用明细/发票总金额计算
- 筛选和排序函数

**7. 统计报表功能**
- 按部门统计
- 按类型统计
- 按月份统计
- 支持多维度数据分析

---

## 🔗 相关链接

- [返回上级目录](../)
