# 实施任务

## 1. 数据字典配置
- [ ] 1.1 在 `sys_dict_item` 表中添加 `completed` 状态
- [ ] 1.2 设置字典项属性：label='已完成', value='completed'
- [ ] 1.3 设置颜色：color_type='success', color='#67C23A'
- [ ] 1.4 设置排序：sort_order=6
- [ ] 1.5 验证字典项添加成功

## 2. 后端枚举更新
- [ ] 2.1 在 `ExpenseStatus` 枚举中添加 `COMPLETED` 状态
- [ ] 2.2 设置枚举值：code="completed", name="已完成"
- [ ] 2.3 确保枚举值与数据字典一致
- [ ] 2.4 更新相关的状态检查方法（如果需要）

## 3. 后端业务逻辑
- [ ] 3.1 修改 `ExpenseServiceImpl.uploadPaymentProof` 方法
- [ ] 3.2 在保存凭证URL后，更新状态为 `COMPLETED`
- [ ] 3.3 更新 `updateAt` 时间戳
- [ ] 3.4 添加日志记录
- [ ] 3.5 后端编译验证

## 4. 前端类型定义
- [ ] 4.1 更新 `types/index.ts` 中的 `ExpenseStatus` 类型
- [ ] 4.2 添加 `completed` 到状态联合类型
- [ ] 4.3 添加 `completed` 到状态选项列表
- [ ] 4.4 设置状态显示文案："已完成"

## 5. 前端工具函数
- [ ] 5.1 更新 `utils/index.ts` 中的状态映射
- [ ] 5.2 添加 `completed` 状态的映射
- [ ] 5.3 添加状态提示信息
- [ ] 5.4 添加状态标签类型（success）

## 6. 前端状态管理
- [ ] 6.1 更新 `store/index.ts` 中的 `uploadPaymentProof` 函数
- [ ] 6.2 修改状态更新逻辑：将 'paid' 改为 'completed'
- [ ] 6.3 更新 `myExpenses` 列表中的状态
- [ ] 6.4 更新 `currentExpense` 中的状态（如果存在）

## 7. 构建和验证
- [ ] 7.1 后端编译验证
- [ ] 7.2 后端打包验证
- [ ] 7.3 前端构建验证
- [ ] 7.4 TypeScript 类型检查
- [ ] 7.5 验证数据字典加载正确

## 8. 功能测试
- [ ] 8.1 测试完整报销流程：从创建到完成
- [ ] 8.2 测试上传凭证功能
- [ ] 8.3 验证上传后状态正确更新为"已完成"
- [ ] 8.4 测试"我的报销"页面显示
- [ ] 8.5 测试"打款管理"页面显示
- [ ] 8.6 验证状态颜色和标签正确
- [ ] 8.7 验证历史数据不受影响

## 9. 文档更新
- [ ] 9.1 更新代码注释
- [ ] 9.2 更新状态流转文档
- [ ] 9.3 记录数据字典配置
